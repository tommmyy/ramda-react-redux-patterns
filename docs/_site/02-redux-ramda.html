<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Redux patterns | React and Ramda patterns</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Redux patterns" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Collection of patterns for React and Redux in combination with awesome Ramda library." />
<meta property="og:description" content="Collection of patterns for React and Redux in combination with awesome Ramda library." />
<link rel="canonical" href="http://localhost:4000/02-redux-ramda.html" />
<meta property="og:url" content="http://localhost:4000/02-redux-ramda.html" />
<meta property="og:site_name" content="React and Ramda patterns" />
<script type="application/ld+json">
{"description":"Collection of patterns for React and Redux in combination with awesome Ramda library.","@type":"WebPage","url":"http://localhost:4000/02-redux-ramda.html","headline":"Redux patterns","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/assets/css/style.css?v=a2fc168096fd982ed7df834d58e8b80c19010ea5">
  </head>
  <body>
    <!-- Belongs at: /_includes/navigation.html -->

<!-- This finds the current page so it can be highlighted. -->



    
        
    


    


    
        
        

<!-- Then we build the nav bar. -->
<nav>
    <ul>
    
        
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li><a href="/">Home</a></li>
        
    
        
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li><a href="/01-react-ramda.html">React patterns</a></li>
        
    
        
            
        
        
        
        <li class="current"><a href="/02-redux-ramda.html">Redux patterns</a></li>
        
    
    </ul>
</nav>


    <section class="page-header">
      <h1 class="project-name">React and Ramda patterns</h1>
      <h2 class="project-tagline">Collection of patterns for React and Redux in combination with awesome Ramda library.</h2>
      
        <a href="http://github.com/tommmyy/ramda-react-redux-patterns" class="btn">View on GitHub</a>
      
      
    </section>
    <section class="main-content">
      <h1 id="redux-patterns">Redux patterns</h1>

<h2 id="1-selectors">1. Selectors</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">fromEntities</span><span class="p">.</span><span class="nx">getItems</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">entities</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">R</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">fromEntities</span><span class="p">.</span><span class="nx">getItems</span><span class="p">,</span> <span class="nx">R</span><span class="p">.</span><span class="nx">path</span><span class="p">([</span><span class="s1">'entities'</span><span class="p">]);</span>

<span class="kd">const</span> <span class="nx">isLoading</span> <span class="o">=</span> <span class="nx">R</span><span class="p">.</span><span class="nx">path</span><span class="p">([</span><span class="s1">'ui'</span><span class="p">,</span> <span class="s1">'loading'</span><span class="p">]);</span>
</code></pre></div></div>

<h2 id="2-memoized-selectors">2. Memoized Selectors</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">createSelector</span> <span class="o">=</span> <span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">R</span><span class="p">.</span><span class="nx">memoizeWith</span><span class="p">(</span><span class="nx">R</span><span class="p">.</span><span class="nx">identity</span><span class="p">,</span> <span class="nx">R</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="nx">path</span><span class="p">))</span>

<span class="c1">// ...</span>

<span class="kd">const</span> <span class="nx">isLoading</span> <span class="o">=</span> <span class="nx">createSelector</span><span class="p">([</span><span class="s1">'ui'</span><span class="p">,</span> <span class="s1">'loading'</span><span class="p">])</span>
</code></pre></div></div>

<h2 id="3-mapping-state">3. Mapping state</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mapStateToProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">ownProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
	<span class="na">items</span><span class="p">:</span> <span class="nx">getItems</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">ownProps</span><span class="p">),</span>
	<span class="na">isLoading</span><span class="p">:</span> <span class="nx">isLoading</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">ownProps</span><span class="p">),</span>
<span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mapStateToProps</span> <span class="o">=</span> <span class="nx">R</span><span class="p">.</span><span class="nx">applySpec</span><span class="p">({</span>
	<span class="na">items</span><span class="p">:</span> <span class="nx">getItems</span><span class="p">,</span>
	<span class="na">isLoading</span><span class="p">:</span> <span class="nx">isLoading</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="rcond-in-reducer">R.cond in reducer</h2>

<h2 id="localized-state">Localized State</h2>

<h3 id="problem">Problem</h3>

<p>Reusable reducer:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">add</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">action</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">"INCREMENT"</span> <span class="p">?</span> <span class="nx">state</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="nx">state</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">combineReducers</span><span class="p">({</span>
	<span class="na">widgetA</span><span class="p">:</span> <span class="nx">add</span><span class="p">,</span>
	<span class="na">widgetB</span><span class="p">:</span> <span class="nx">add</span>
<span class="p">})</span>

<span class="c1">// { widgetA: 0, widgetB: 0 }</span>

<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"INCREMENT"</span> <span class="p">})</span>
<span class="c1">// { widgetA: 1, widgetB: 1 }</span>

</code></pre></div></div>

<h3 id="1-vanilla-namespacing">1. Vanilla namespacing</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">combineReducers</span><span class="p">({</span>
	<span class="na">widgetA</span><span class="p">:</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span>
		<span class="nx">action</span><span class="p">.</span><span class="nx">meta</span> <span class="o">&amp;&amp;</span> <span class="nx">action</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">===</span> <span class="s2">"@WIDGET-A"</span> <span class="p">?</span> <span class="nx">add</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">:</span> <span class="nx">state</span><span class="p">,</span>
	<span class="na">widgetB</span><span class="p">:(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span>
		<span class="nx">action</span><span class="p">.</span><span class="nx">meta</span> <span class="o">&amp;&amp;</span> <span class="nx">action</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">===</span> <span class="s2">"@WIDGET-B"</span> <span class="p">?</span> <span class="nx">add</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">:</span> <span class="nx">state</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1">// { widgetA: 0, widgetB: 0 }</span>

<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"INCREMENT"</span><span class="p">,</span> <span class="na">meta</span><span class="p">:</span> <span class="p">{</span> <span class="na">namespace</span><span class="p">:</span> <span class="s2">"@WIDGET-A"</span> <span class="p">}</span> <span class="p">})</span>
<span class="c1">// { widgetA: 1, widgetB: 0 }</span>


<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"INCREMENT"</span><span class="p">,</span> <span class="na">meta</span><span class="p">:</span> <span class="p">{</span> <span class="na">namespace</span><span class="p">:</span> <span class="s2">"@WIDGET-B"</span> <span class="p">}</span> <span class="p">})</span>
<span class="c1">// { widgetA: 1, widgetB: 1 }</span>
</code></pre></div></div>

<p><strong>Introducing <code class="highlighter-rouge">filteredReducer</code> (TODO: link to redux site)</strong></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">filteredReducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cond</span><span class="p">,</span> <span class="nx">reducer</span><span class="p">)</span> <span class="o">=&gt;</span>
	<span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span>
		<span class="nx">cond</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span> <span class="p">?</span> <span class="nx">reducer</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">:</span> <span class="nx">state</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">namespaceEquals</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ns</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">action</span><span class="p">.</span><span class="nx">meta</span> <span class="o">&amp;&amp;</span> <span class="nx">action</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">===</span> <span class="nx">ns</span>

<span class="c1">// ...</span>

<span class="kd">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">combineReducers</span><span class="p">({</span>
	<span class="na">widgetA</span><span class="p">:</span> <span class="nx">filteredReducer</span><span class="p">(</span><span class="nx">namespaceEquals</span><span class="p">(</span><span class="s2">"@WIDGET-A"</span><span class="p">),</span> <span class="nx">add</span><span class="p">),</span>
	<span class="na">widgetB</span><span class="p">:</span> <span class="nx">filteredReducer</span><span class="p">(</span><span class="nx">namespaceEquals</span><span class="p">(</span><span class="s2">"@WIDGET-B"</span><span class="p">),</span> <span class="nx">add</span><span class="p">),</span>
<span class="p">})</span>
</code></pre></div></div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="http://github.com/tommmyy/ramda-react-redux-patterns">ramda-react-redux-patterns</a> is maintained by <a href="http://github.com/tommmyy">tommmyy</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>
